{"version":3,"sources":["Hdr.module.css","Login.js","Register.js","PhragList.js","MutPhrag.js","NewPhrag.js","Hdr.js","state.js","App.js","index.js","App.module.css"],"names":["module","exports","h1","Login","_useContext","useContext","Conn","api","acts","select","_useState","useState","_useState2","Object","slicedToArray","email","setEmail","_useState3","_useState4","pass","setPass","curUser","curEmail","react_default","a","createElement","onClick","auth_logoff","value","onChange","e","target","placeholder","type","name","required","post","password","then","res","auth_login","data","auth_token","user","Register","axios","console","log","PhragList","allPhrags","map","p","phr_select","id","key","text","MutPhrag","props","setText","setId","useEffect","selPhrag","_useState5","_useState6","isEditing","setIsEditing","fetchPhrags","rnbwClrs","idx","revClr","clr","length","Hdr","setClr","className","styles","style","color","ats","AUTH_LOGIN","AUTH_LOGOFF","PHR_LOAD","PHR_SELECT","_phr_rx","state","action","_dc","items","selected","_auth_rx","token","initialState","auth","sessionStorage","getItem","phrags","reducer","assign","update","selectToken","selectEmail","selectAllPhrags","selectSelectedPhrag","selId","selectSelectedPhragId","find","getSelectors","React","createContext","SHOW_DEBUGGER","ReactDOM","render","dbg","setDbg","dbgRC","setDbgRC","_useReducer","useReducer","_useReducer2","appState","dispatch","setItem","phr_load","getActions","headers","Authorization","concat","create","get","conn","Provider","body","window","NewPhrag_MutPhrag","JSON","stringify","document","getElementById","error"],"mappings":"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","file":"static/js/main.89d904e8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"h1\":\"Hdr_h1__3TjoN\"};","import React, {useState, useContext} from 'react';\n\nimport { Conn } from './App.js';\n\n\nexport default function Login() {\n  const {\n    api,\n    acts,\n    select,\n  } = useContext(Conn)\n\n  const [email, setEmail] = useState('')\n  const [pass, setPass] = useState('')\n  const submit = () => api.post('/auth/login', {\n    email,\n    password: pass,\n  }).then(res => acts.auth_login(res.data.auth_token, res.data.user.email))\n  const logOff = () => acts.auth_logoff()\n  const curUser = select.curEmail();\n\n  return <div>\n    { curUser ? <div>\n      <button onClick={logOff}>\n        Log off\n      </button>\n    </div> : <div>\n      <input\n        value={email}\n        onChange={e => setEmail(e.target.value)}\n        placeholder=\"Email address\"\n        type=\"email\"\n        name=\"email\"\n        required\n      />\n      <input\n        value={pass}\n        onChange={e => setPass(e.target.value)}\n        placeholder=\"Password\"\n        type=\"password\"\n        name=\"password\"\n        required\n      />\n      <button onClick={submit}>\n        Login\n      </button>\n    </div> }\n  </div>\n}\n","import React, {useState} from 'react';\n\nimport axios from 'axios';\n\nexport default function Register() {\n  const [email, setEmail] = useState('')\n  const [pass, setPass] = useState('')\n  const submit = () =>\n    axios.post('/auth/register', {email, password:pass}).then(res => console.log(res))\n\n  return <div>\n    <p>Register</p>\n    <input\n      value={email}\n      onChange={e => setEmail(e.target.value)}\n      placeholder=\"Email address\"\n      type=\"email\"\n      name=\"email\"\n      required\n    />\n    <input\n      value={pass}\n      onChange={e => setPass(e.target.value)}\n      placeholder=\"Password\"\n      type=\"password\"\n      name=\"password\"\n      required\n    />\n    <button type=\"submit\" onClick={submit}>\n      Register\n    </button>\n  </div>\n}\n","import React, { useContext } from 'react';\n\nimport { Conn } from './App.js';\n\nexport default function PhragList() {\n  const {\n    acts,\n    select\n  } = useContext(Conn)\n\n  return <div>\n    <div>\n      {select.allPhrags().map((p) =>\n          <div onClick={() => acts.phr_select(p.id)} key={p.id}>{p.text}</div>)\n      }\n    </div>\n  </div>\n}\n","import React, {useState, useEffect, useContext} from 'react';\n\nimport { Conn } from './App.js';\n\nexport default function MutPhrag(props) {\n  const {\n    api,\n  } = useContext(Conn)\n\n  const [text, setText] = useState('')\n  const [id, setId] = useState(null)\n  useEffect(() => {\n    if (props.selPhrag) {\n      setText(props.selPhrag.text)\n      setId(props.selPhrag.id)\n    }\n  }, [props.selPhrag])\n  const [isEditing, setIsEditing] = useState(false)\n\n  const submit = () => api.post('/phrag/update', {\n    text,\n    id,\n  }).then((res) => {\n    setText(text)\n    api.fetchPhrags().then(() => setIsEditing(false))\n  })\n\n\n  return <div>\n    { isEditing ? <div>\n      <input\n        value={text}\n        onChange={e => setText(e.target.value)}\n        placeholder=\"write something\"\n        type=\"text\"\n        name=\"text\"\n        required\n      />\n      <button onClick={submit}>\n        update\n      </button>\n    </div> : <div>\n      {text}\n    </div> }\n    <button onClick={() => setIsEditing(!isEditing)}>\n      is edit\n    </button>\n\n  </div>\n}\n","import React, {useState, useContext} from 'react';\n\nimport { Conn } from './App.js';\n\nexport default function MutPhrag(props) {\n  const {\n    api,\n  } = useContext(Conn)\n\n  const initText = ''\n  const [text, setText] = useState(initText)\n\n  const submit = () => api.post('/phrag/add', {\n    text,\n  }).then((res) => {\n    setText(initText)\n    api.fetchPhrags()\n  })\n\n\n  return <div>\n    <input\n      value={text}\n      onChange={e => setText(e.target.value)}\n      placeholder=\"write something\"\n      type=\"text\"\n      name=\"text\"\n      required\n    />\n    <button onClick={submit}>\n      add\n    </button>\n  </div>\n}\n\n","import React, { useState } from 'react'\n\n// import AnimationTimer from 'animation-timer'\n// import Easer from 'functional-easing'\n\nimport styles from './Hdr.module.css'\n\n\n/*\nALT cOLORS\ncolor: #7CFC00;\ncolor: #7FFF00;\ncolor: #20C20E:\n  color: #5CE905;\n\nrainbow colors\n#e91405 - red\n#D98805 - orng\n#cbe905 - ylw\n#5CE905 - grn\n#2305e9 - blu\n#8F05DA - purp\n#e905ce - mgnta\n*/\n\nconst rnbwClrs = [\n  '#e91405',\n  '#D98805',\n  '#cbe905',\n  '#5CE905',\n  '#2305e9',\n  '#8F05DA',\n  '#e905ce',\n]\n\nlet idx = 0;\nconst revClr = () => {\n  const clr = rnbwClrs[idx]\n  idx = (idx + 1) % rnbwClrs.length\n  return clr\n}\n\n\nexport default function Hdr() {\n  const [clr, setClr] = useState('#5CE905')\n  const mutClr = () => setClr(revClr())\n\n  // const easer = Easer\n  // console.log(easer)\n  // debugger;\n\n  return <h1 onClick={mutClr} className={styles.h1} style={{'color':clr}}>\n    WELCOME 2.... PIMPY'S MIND PALACE\n  </h1>\n\n}\n","/**\n * ACTIONS AND ACTION TYPES\n */\n\nconst ats = {\n  'AUTH_LOGIN': 'AUTH_LOGIN',\n  'AUTH_LOGOFF': 'AUTH_LOGOFF',\n  'PHR_LOAD': 'PHR_LOAD',\n  'PHR_SELECT': 'PHR_SELECT',\n}\n\nfunction getActions(dispatch) {\n  return {\n    'auth_login': (token, email) => {\n      dispatch({type: ats.AUTH_LOGIN, 'data': {token, email}})\n      sessionStorage.setItem('tkn', token)\n      sessionStorage.setItem('email', email)\n    },\n    'auth_logoff': () => {\n      dispatch({type: ats.AUTH_LOGOFF})\n      sessionStorage.setItem('tkn', null)\n      sessionStorage.setItem('email', null)\n    },\n    'phr_load': (data) => dispatch({type: ats.PHR_LOAD, data}),\n    'phr_select': (data) => dispatch({type: ats.PHR_SELECT, data}),\n  }\n}\n\n\n/**\n * PHRAGS REDUCER\n */\n\nconst _phr_is = {\n  'items': [],\n  'selected': null,\n}\n\nfunction _phr_rx(state, action) {\n  switch (action.type) {\n    case ats.PHR_LOAD:\n      return _dc(state, {'items': action.data });\n    case ats.AUTH_LOGOFF:\n      return _dc(state, {'items': []});\n    case ats.PHR_SELECT:\n      return _dc(state, {'selected': action.data });\n    default:\n      return state\n  }\n}\n\n\n/**\n * AUTH REDUCER\n */\n\nconst initTkn = sessionStorage.getItem('tkn') !== \"null\" ? sessionStorage.getItem('tkn') : null\nconst initEmail = sessionStorage.getItem('email') !== \"null\" ? sessionStorage.getItem('email') : null\nconst _auth_is = {\n  'token': initTkn,\n  'email': initEmail,\n}\n\nfunction _auth_rx(state, action) {\n  switch (action.type) {\n    case ats.AUTH_LOGIN:\n      return _dc(state, {'token': action.data.token, 'email': action.data.email})\n    case ats.AUTH_LOGOFF:\n      return _dc(state, {'token': null, 'email': null});\n    default:\n      return state\n  }\n}\n\n\n/**\n * MAIN REDUCER\n */\n\nconst initialState = {\n  'auth': _auth_is,\n  'phrags': _phr_is,\n}\n\nfunction reducer(state, action) {\n  let _state = Object.assign({}, {\n    'auth': _auth_rx(state.auth, action),\n    'phrags': _phr_rx(state.phrags, action),\n  })\n  return _state\n}\n\n\n/**\n * REDUCER HELPERS\n */\n\nfunction _dc(state, update) {\n  return Object.assign({}, state, update);\n}\n\n\n\n/**\n * SELECTOR FUNCTIONS\n */\nconst selectToken = (state) => () => state.auth.token;\nconst selectEmail = (state) => () => state.auth.email;\nconst selectAllPhrags = (state) => () => state.phrags.items\nconst selectSelectedPhragId = (state) => () => state.phrags.selected\nconst selectSelectedPhrag = (state) => () => {\n  const selId = selectSelectedPhragId(state)()\n  const allPhrags = selectAllPhrags(state)()\n  if (!selId) {\n    return null;\n  }\n  return allPhrags.find((p) => p.id === selId)\n}\n\nconst getSelectors = (state) => ({\n  'token': selectToken(state),\n  'allPhrags': selectAllPhrags(state),\n  'selPhrag': selectSelectedPhrag(state),\n  'curEmail': selectEmail(state),\n})\n\n\n\n/**\n * EXPORT IT\n */\nexport {\n  reducer,\n  initialState,\n  getSelectors,\n  getActions,\n}\n","import React, {useState, useEffect, useReducer} from 'react';\n\nimport axios from 'axios';\n\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport PhragList from './PhragList.js';\nimport MutPhrag from './MutPhrag.js';\nimport NewPhrag from './NewPhrag.js';\nimport Hdr from './Hdr.js';\nimport {reducer, initialState, getSelectors, getActions} from './state.js';\nimport styles from './App.module.css'\n\n\nexport const Conn = React.createContext(null)\n\nconst SHOW_DEBUGGER = true\n\nexport default function App() {\n  const [dbg, setDbg] = useState(false)\n  const [dbgRC, setDbgRC] = useState(0)\n  const [appState, dispatch] = useReducer(reducer, initialState)\n  const select = getSelectors(appState)\n  const acts = getActions(dispatch)\n  const token = select.token()\n  const headers = token ? {\"Authorization\": `Bearer ${token}`} : {}\n  const api = axios.create({\n    headers,\n  })\n  api.fetchPhrags = () => api.get('/phrag/')\n    .then(res => acts.phr_load(res.data.phrags))\n  const conn = {\n    api,\n    acts,\n    select,\n  }\n\n  // INIT FETCH FOR LOGGEDIN USERS\n  useEffect(() => {\n    setDbgRC(dbgRC + 1)\n    if (token) {\n      api.fetchPhrags()\n    } else {\n      acts.phr_load([])\n    }\n  }, [token, dbgRC, acts, api])\n  if (dbgRC > 100) { debugger; }\n\n  return (\n    <Conn.Provider value={conn}>\n      <div className={styles.body}>\n        <p>{dbgRC}</p>\n        <Hdr />\n        { token && <div>\n          <div className={styles.window}>\n            <div className=\"Left\">\n              <NewPhrag />\n              <PhragList />\n            </div>\n            <div className=\"Right\">\n              <MutPhrag selPhrag={select.selPhrag()}/>\n            </div>\n          </div>\n        </div>}\n        <Login />\n        { SHOW_DEBUGGER && <div>\n          <h2 onClick={() => setDbg(!dbg)}>~~~~DEBUGGER MODE~~~~~</h2>\n          {dbg && <div>\n            <Register />\n            <pre>{JSON.stringify(appState, null, 2)}</pre>\n          </div>}\n        </div>}\n      </div>\n    </Conn.Provider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"App_body__ZTvxg\",\"window\":\"App_window__35LVr\",\"error\":\"App_error__1umzI\"};"],"sourceRoot":""}